(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,a){e.exports=a(168)},140:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(43),l=a.n(c),o=(a(140),a(28)),i=a(14),s=a(114),u=Object(s.a)({palette:{primary:{main:"#3f51b5"}},spacing:4}),m=a(227),d=a(228),g=a(252),p=a(256),f=a(258),b=a(259),E=a(253),h=a(249),v=a(76),O=a.n(v),w=Object(s.a)(),j=function(){var e=Object(i.f)();return Object(n.useEffect)((function(){window.localStorage.getItem("loggedTaskappUser")&&e("/homepage")}),[]),r.a.createElement(m.a,{theme:w},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{flexGrow:1}},r.a.createElement(p.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}},r.a.createElement(O.a,null)),r.a.createElement(E.a,{variant:"h6",component:"div",sx:{flexGrow:1}},"KBlog"),r.a.createElement(h.a,{variant:"contained",sx:{margin:1},component:o.b,to:"/loginpage"},"LOG IN"),r.a.createElement(h.a,{variant:"contained",sx:{margin:1},component:o.b,to:"/createaccount"},"SIGN UP")))))},x=a(178),k=function(){return r.a.createElement(x.a,{theme:u},r.a.createElement(j,null))},y=a(22),C=a.n(y),S=a(32),T=a(8),P=a(247),D=a(246),I=function(e){var t=e.message;return null===t?null:r.a.createElement(P.a,{open:t,autoHideDuration:3e3},r.a.createElement(D.a,{severity:"error",sx:{width:"100%"}},t))},N=a(25),A=a.n(N),z=null,W={getAll:function(){return A.a.get("api/tasks").then((function(e){return e.data}))},create:function(){var e=Object(S.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:z}},e.next=3,A.a.post("api/tasks",t,a);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return A.a.put("".concat("api/tasks","/").concat(e),t).then((function(e){return e.data}))},deleteTask:function(e){var t={headers:{Authorization:z}};return A.a.delete("".concat("api/tasks","/").concat(e),t)},setToken:function(e){z="bearer ".concat(e)}},U=function(e){"bearer ".concat(e)},B={login:function(){var e=Object(S.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=a(250),q=a(241),F=a(255),L=a(245),H=a(251),J=a(112),V=a.n(J),R=a(254),K=Object(s.a)(),M=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(T.a)(l,2),u=s[0],p=s[1],f=Object(n.useState)(null),b=Object(T.a)(f,2),v=b[0],O=b[1],w=Object(i.f)();Object(n.useEffect)((function(){window.localStorage.getItem("loggedTaskappUser")&&w("/homepage")}),[]);var j=function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,B.login({username:a,password:u});case 4:n=e.sent,window.localStorage.setItem("loggedTaskappUser",JSON.stringify(n)),W.setToken(n.token),U(n.token),c(""),p(""),w("/homepage"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),O(a?u?"Invalid credentials":"Please enter a password":"Please enter a username"),setTimeout((function(){O(null)}),5e3);case 17:console.log("logging in with",a,u);case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{theme:K},r.a.createElement(I,{message:v}),r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(G.a,{sx:{m:1,bgcolor:"secondary.main"}},r.a.createElement(V.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(g.a,{component:"form",onSubmit:j,noValidate:!0,sx:{mt:1}},r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",value:a,onChange:function(e){var t=e.target;return c(t.value)},autoComplete:"email",autoFocus:!0}),r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",id:"password",type:"password",value:u,onChange:function(e){var t=e.target;return p(t.value)},autoComplete:"current-password"}),r.a.createElement(F.a,{control:r.a.createElement(L.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Sign In"),r.a.createElement(h.a,{component:o.b,to:"/",fullWidth:!0,variant:"contained",sx:{mt:0,mb:2}},"Cancel"),r.a.createElement(H.a,{container:!0},r.a.createElement(H.a,{item:!0,xs:!0}),r.a.createElement(H.a,{item:!0},r.a.createElement(o.b,{to:"/createaccount"},"Don't have an account? Sign Up")))))))},X={create:function(){var e=Object(S.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("/api/users",t);case 2:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Q=Object(s.a)(),Y=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(T.a)(l,2),u=s[0],p=s[1],f=Object(n.useState)(""),b=Object(T.a)(f,2),v=b[0],O=b[1],w=Object(n.useState)(""),j=Object(T.a)(w,2),x=j[0],k=j[1],y=Object(n.useState)(null),P=Object(T.a)(y,2),D=P[0],N=P[1],A=Object(i.f)(),z=function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,X.create({username:u,name:a,password:v,confirmPassword:x});case 4:p(""),O(""),k(""),A("/loginpage"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),u?v?v!==x&&N("Passwords do not match"):N("Please enter a password"):N("Please enter a username"),setTimeout((function(){N(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{theme:Q},r.a.createElement(I,{message:D}),r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(E.a,{component:"h1",variant:"h5"},"Create An Account"),r.a.createElement(g.a,{component:"form",onSubmit:z,noValidate:!0,sx:{mt:1}},r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,id:"name",name:"name",label:"Name",value:a,onChange:function(e){var t=e.target;return c(t.value)},autoComplete:"name",autoFocus:!0}),r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",value:u,onChange:function(e){var t=e.target;return p(t.value)},autoComplete:"email",autoFocus:!0}),r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",id:"password",type:"password",value:v,onChange:function(e){var t=e.target;return O(t.value)},autoComplete:"current-password"}),r.a.createElement(q.a,{margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",id:"confirmPassword",type:"password",value:x,onChange:function(e){var t=e.target;return k(t.value)},autoComplete:"current-password"}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Go"),r.a.createElement(h.a,{component:o.b,to:"/loginpage",fullWidth:!0,variant:"contained",sx:{mt:0,mb:2}},"Cancel"),r.a.createElement(H.a,{container:!0},r.a.createElement(H.a,{item:!0,xs:!0}),r.a.createElement(H.a,{item:!0},r.a.createElement(o.b,{to:"/loginpage"},"Already have an account? Log In")))))))},Z=a(113),$=a(238),_=Object(s.a)();function ee(e){var t=e.children,a=Object($.a)({disableHysteresis:!0,threshold:0});return r.a.cloneElement(t,{elevation:a?4:0})}var te=function(e){var t=e.username,a=e.handleLogOut;return!t&&r.a.createElement(m.a,{theme:_},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{flexGrow:1},position:"sticky"},r.a.createElement(ee,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}},r.a.createElement(O.a,null)),r.a.createElement(E.a,{variant:"h6",component:"div",sx:{flexGrow:1}},"Welcome ",t),r.a.createElement(h.a,{variant:"contained",onClick:a},"Log Out")))),r.a.createElement(f.a,null)))},ae=a(260),ne=a(263),re=a(262),ce=a(261),le=a(242),oe=Object(le.a)((function(e){return{card:{marginBottom:e.spacing(5)}}})),ie=function(e){var t=e.task,a=e.deleteTask,c=oe(),l=Object(n.useState)(!1),o=Object(T.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(T.a)(u,2),d=m[0],g=m[1],p=function(e,t){"clickaway"!==t&&s(!1)};return r.a.createElement(ae.a,{className:c.card},r.a.createElement(ce.a,{component:"img",image:"https://images.squarespace-cdn.com/content/v1/5f68da90297b94613c756dd6/e0d06859-30f6-4679-997c-a2d688de5629/LXI03898.jpg?format=1500w",alt:"green iguana",raised:"true"}),r.a.createElement(re.a,null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h5",component:"div"},t.title),r.a.createElement(E.a,{variant:"body2",color:"text.secondary"},t.content)),r.a.createElement(ne.a,null,r.a.createElement(h.a,{size:"small"},"Share"),r.a.createElement(h.a,{size:"small",onClick:function(){window.confirm("Are you sure you want to delete this?")&&W.deleteTask(t.id).then((function(){s(!0),a(t.id)})).catch((function(){g(!0)}))}},"Delete"),r.a.createElement(P.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:i,autoHideDuration:3e3,onClose:p},r.a.createElement(D.a,{onClose:p,severity:"success"},"Deleted post!")),r.a.createElement(P.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:d,autoHideDuration:3e3,onClose:p},r.a.createElement(D.a,{onClose:function(e,t){"clickaway"!==t&&g(!1)},severity:"warning"},"Cannot delete other user's posts!"))))},se=Object(s.a)(),ue=Object(le.a)({tasksFrame:{m:1},tasksContainer:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:8}}),me=function(e){var t=e.display,a=e.tasks,n=e.toggleFinished,c=e.deleteTask,l=ue();return t&&r.a.createElement(m.a,{theme:se},r.a.createElement(d.a,null),r.a.createElement(g.a,{className:l.tasksFrame},r.a.createElement(R.a,{className:l.tasksContainer,spacing:2},a.map((function(e,t){return r.a.createElement(ie,{key:t,task:e,toggleFinished:function(){return n(e.id)},deleteTask:function(){return c(e.id)}})})))),r.a.createElement(g.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",m:1}}))},de=a(3),ge=a(240),pe=a(264),fe=a(243),be=a(248),Ee=a(239),he=function(){return A.a.get("api/categories").then((function(e){return e.data}))},ve=function(e){var t=A.a.post("api/categories",e);return console.log(t.then((function(e){return e.data}))),t.then((function(e){return e.data}))},Oe=Object(le.a)((function(e){return{fab:{position:"fixed",bottom:20,left:20},container:Object(de.a)({borderRadius:5,width:500,height:400,backgroundColor:"white",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"},e.breakpoints.down("sm"),{width:"100vw",height:"100vh"}),item:{marginBottom:e.spacing(3)}}})),we=function(e){var t=e.tasks,a=e.setTasks,c=Oe(),l=Object(n.useState)(!1),o=Object(T.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(T.a)(u,2),d=m[0],g=m[1],p=Object(n.useState)(""),f=Object(T.a)(p,2),b=f[0],E=f[1],v=Object(n.useState)("Public"),O=Object(T.a)(v,2),w=O[0],j=O[1],x=Object(n.useState)(""),k=Object(T.a)(x,2),y=k[0],C=k[1],S=Object(n.useState)([]),I=Object(T.a)(S,2),N=I[0],A=I[1],z=function(e,t){"clickaway"!==t&&g(!1)};return r.a.createElement("div",null,r.a.createElement(ge.a,{label:"AddButton",id:"AddButton",name:"AddButton",title:"Add","aria-label":"add",onClick:function(){return s(!0)}},r.a.createElement(pe.a,{color:"primary",className:c.fab},r.a.createElement(Ee.a,null))),r.a.createElement(fe.a,{open:i,onClose:function(){return s(!1)},className:c.modal},r.a.createElement(R.a,{className:c.container},r.a.createElement("h2",null,"Create a Post"),r.a.createElement("form",{className:c.form,autoComplete:"off",onSubmit:function(e){e.preventDefault();var n=!0===!w.replace(/\s/g,"").length?"uncategorized":w,r={title:y,content:b,id:Math.random(1e7),status:!1,category:n,date:Date()},c=N.find((function(e){return e.category===w}));console.log(c),void 0===c&&"uncategorized"!==n&&ve({category:n}).then((function(e){console.log(e),A(N.concat(e))})),b.replace(/\s/g,"").length?y.replace(/\s/g,"").length?W.create(r).then((function(e){console.log(e),a(t.concat(e)),E(""),j("Public"),C(""),s(!1),g(!0)})):(alert("Please enter a valid title"),C("")):(alert("Please enter valid text."),E(""))}},r.a.createElement("div",{className:c.item},r.a.createElement(q.a,{id:"standard-basic",name:"standard-basic",label:"Title",value:y,onChange:function(e){C(e.target.value)},size:"small",style:{width:"100%"}})),r.a.createElement("div",{className:c.item},r.a.createElement(q.a,{id:"Description",name:"Description",label:"Description",multiline:!0,rows:4,defaultValue:"Enter text here...",onChange:function(e){console.log(e.target.value),E(e.target.value)},value:b,placeholder:"Enter text here...",size:"small",style:{width:"100%"},variant:"outlined"})),r.a.createElement("div",{className:c.item},r.a.createElement(q.a,{select:!0,label:"Visibility",value:w,onChange:function(e){j(e.target.value)}},r.a.createElement(be.a,{value:"Public"}," Public"),r.a.createElement(be.a,{value:"Private"}," Private"),r.a.createElement(be.a,{value:"Unlisted"}," Unlisted"))),r.a.createElement("div",{className:c.item},r.a.createElement(h.a,{variant:"outlined",color:"primary",type:"submit",style:{marginRight:20}},"Post"),r.a.createElement(h.a,{variant:"outlined",color:"secondary",onClick:function(){s(!1)}},"Cancel"))))),r.a.createElement(P.a,{anchorOrigin:{vertical:" bottom",horizontal:"center"},open:d,autoHideDuration:3e3,onClose:z},r.a.createElement(D.a,{onClose:z,severity:"success"},"Created new post!")))},je=Object(s.a)(),xe=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(T.a)(l,2),s=o[0],u=o[1],d=Object(n.useState)(""),g=Object(T.a)(d,2),p=g[0],f=g[1],b=Object(n.useState)([]),E=Object(T.a)(b,2),h=E[0],v=E[1],O=Object(n.useState)(null),w=Object(T.a)(O,2),j=w[0],x=w[1],k=Object(n.useState)(null),y=Object(T.a)(k,2),C=y[0],S=y[1],P=Object(i.f)();Object(n.useEffect)((function(){console.log("effect"),W.getAll().then((function(e){c(e)}))}),[]),Object(n.useEffect)((function(){console.log("categories"),he().then((function(e){v(e),console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedTaskappUser");if(console.log(e),e){var t=Object(Z.a)(e),a=new Date;if(1e3*t.exp<a.getTime())try{window.localStorage.removeItem("loggedTaskappUser"),window.location.reload()}catch(r){x("Already logged out"),setTimeout((function(){x(null)}),5e3)}else{var n=JSON.parse(e);S(n),W.setToken(n.token),U(n.token)}}}),[]);return C||P("/loginpage"),r.a.createElement(m.a,{theme:je},r.a.createElement(I,{message:j}),r.a.createElement(te,{username:C?C.username:"",handleLogOut:function(e){e.preventDefault();try{window.localStorage.removeItem("loggedTaskappUser")}catch(t){x("Already logged out"),setTimeout((function(){x(null)}),5e3)}P("/loginpage")}}),r.a.createElement(H.a,{container:!0,sx:{padding:"16px"}},r.a.createElement(H.a,{item:!0,sm:2,xs:2}),r.a.createElement(H.a,{item:!0,sm:7,xs:10},r.a.createElement(me,{display:!!C,tasks:a,deleteTask:function(e){c(a.filter((function(t){return t.id!==e})))},newTask:s,handleTaskChange:function(e){console.log(e.target.value),u(e.target.value)},newCategory:p,handleCategoryChange:function(e){f(e.target.value)},currentCategories:h})),r.a.createElement(H.a,{item:!0,sm:3})),C&&r.a.createElement(we,{className:"AddButton",tasks:a,setTasks:c}))};l.a.render(r.a.createElement(o.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",element:r.a.createElement(k,null)}),r.a.createElement(i.a,{path:"/createaccount",element:r.a.createElement(Y,null)}),r.a.createElement(i.a,{path:"/loginpage",element:r.a.createElement(M,null)}),r.a.createElement(i.a,{path:"/homepage",element:r.a.createElement(xe,null)}))),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.e1ac3567.chunk.js.map