(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{131:function(e,t,a){e.exports=a(164)},136:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(43),c=a.n(l),o=(a(136),a(14)),i=a(37),s=a(113),u=Object(s.a)({palette:{primary:{main:"#3f51b5"}},spacing:4}),m=a(228),d=a(229),g=a(253),f=a(257),p=a(259),b=a(260),E=a(254),h=a(250),v=a(62),O=a.n(v),j=Object(s.a)(),w=function(){var e=Object(o.g)();return Object(n.useEffect)((function(){window.localStorage.getItem("loggedTaskappUser")&&e("/homepage")}),[]),r.a.createElement(m.a,{theme:j},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{flexGrow:1}},r.a.createElement(f.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}},r.a.createElement(O.a,null)),r.a.createElement(E.a,{variant:"h6",component:"div",sx:{flexGrow:1}},"KBlog"),r.a.createElement(h.a,{variant:"contained",component:i.b,to:"/loginpage"},"LOG IN")))))},k=a(174),x=function(){return r.a.createElement(k.a,{theme:u},r.a.createElement(w,null))},y=a(24),S=a.n(y),C=a(33),T=a(9),D=function(){return r.a.createElement("div",null,"hi")},I=a(248),N=a(247),P=function(e){var t=e.message;return null===t?null:r.a.createElement(I.a,{open:t,autoHideDuration:3e3},r.a.createElement(N.a,{severity:"error",sx:{width:"100%"}},t))},z=a(25),U=a.n(z),A=null,F={getAll:function(){return U.a.get("api/tasks").then((function(e){return e.data}))},create:function(){var e=Object(C.a)(S.a.mark((function e(t){var a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:A}},e.next=3,U.a.post("api/tasks",t,a);case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return U.a.put("".concat("api/tasks","/").concat(e),t).then((function(e){return e.data}))},deleteTask:function(e){return U.a.delete("".concat("api/tasks","/").concat(e))},setToken:function(e){A="bearer ".concat(e)}},B=function(e){"bearer ".concat(e)},G={login:function(){var e=Object(C.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=a(251),L=a(242),H=a(256),J=a(246),q=a(252),R=a(111),V=a.n(R),K=a(255),M=(Object(n.createContext)(null),Object(s.a)()),X=function(){var e=Object(n.useState)(""),t=Object(T.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(T.a)(c,2),u=s[0],f=s[1],p=Object(n.useState)(null),b=Object(T.a)(p,2),v=b[0],O=b[1],j=Object(n.useState)(null),w=Object(T.a)(j,2),k=(w[0],w[1]),x=Object(o.g)();Object(o.f)().state;Object(n.useEffect)((function(){window.localStorage.getItem("loggedTaskappUser")&&x("/homepage")}),[]);var y=function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,G.login({username:a,password:u});case 4:n=e.sent,window.localStorage.setItem("loggedTaskappUser",JSON.stringify(n)),F.setToken(n.token),B(n.token),k(n),l(""),f(""),x("/homepage"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),O(a?u?"Invalid credentials":"Please enter a password":"Please enter a username"),setTimeout((function(){O(null)}),5e3);case 18:console.log("logging in with",a,u);case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{theme:M},r.a.createElement(P,{message:v}),r.a.createElement(K.a,{component:"main",maxWidth:"xs"},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(W.a,{sx:{m:1,bgcolor:"secondary.main"}},r.a.createElement(V.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(g.a,{component:"form",onSubmit:y,noValidate:!0,sx:{mt:1}},r.a.createElement(L.a,{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",value:a,onChange:function(e){var t=e.target;return l(t.value)},autoComplete:"email",autoFocus:!0}),r.a.createElement(L.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",id:"password",type:"password",value:u,onChange:function(e){var t=e.target;return f(t.value)},autoComplete:"current-password"}),r.a.createElement(H.a,{control:r.a.createElement(J.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2}},"Sign In"),r.a.createElement(h.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",sx:{mt:0,mb:2}},"Cancel"),r.a.createElement(q.a,{container:!0},r.a.createElement(q.a,{item:!0,xs:!0}),r.a.createElement(q.a,{item:!0},r.a.createElement(i.b,{to:"/createaccount"},"Don't have an account? Sign Up")))))))},Q=a(86),Y=a(112),Z=a(239),$=Object(s.a)();function _(e){var t=e.children,a=Object(Z.a)({disableHysteresis:!0,threshold:0});return r.a.cloneElement(t,{elevation:a?4:0})}var ee=function(e){var t=e.username,a=e.handleLogOut;return t&&r.a.createElement(m.a,{theme:$},r.a.createElement(d.a,null),r.a.createElement(g.a,{sx:{flexGrow:1},position:"sticky"},r.a.createElement(_,null,r.a.createElement(f.a,null,r.a.createElement(p.a,null,r.a.createElement(b.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}},r.a.createElement(O.a,null)),r.a.createElement(E.a,{variant:"h6",component:"div",sx:{flexGrow:1}},"Welcome ",t),r.a.createElement(h.a,{variant:"contained",onClick:a},"Log Out")))),r.a.createElement(p.a,null)))},te=a(261),ae=a(264),ne=a(263),re=a(262),le=a(243),ce=Object(le.a)((function(e){return{card:{marginBottom:e.spacing(5)}}})),oe=function(e){var t=e.task,a=(e.toggleFinished,e.deleteTask),l=ce(),c=Object(n.useState)(!1),o=Object(T.a)(c,2),i=o[0],s=o[1],u=function(e,t){"clickaway"!==t&&s(!1)};return r.a.createElement(te.a,{className:l.card},r.a.createElement(re.a,{component:"img",image:"https://images.squarespace-cdn.com/content/v1/5f68da90297b94613c756dd6/e0d06859-30f6-4679-997c-a2d688de5629/LXI03898.jpg?format=1500w",alt:"green iguana",raised:"true"}),r.a.createElement(ne.a,null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h5",component:"div"},t.title),r.a.createElement(E.a,{variant:"body2",color:"text.secondary"},t.content)),r.a.createElement(ae.a,null,r.a.createElement(h.a,{size:"small"},"Share"),r.a.createElement(h.a,{size:"small",onClick:function(){window.confirm("Are you sure you want to delete this?")&&(s(!0),F.deleteTask(t.id),a(t.id))}},"Delete"),r.a.createElement(I.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:i,autoHideDuration:3e3,onClose:u},r.a.createElement(N.a,{onClose:u,severity:"success"},"Deleted post!"))))},ie=Object(s.a)(),se=Object(le.a)({tasksFrame:{m:1},tasksContainer:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:8}}),ue=function(e){var t=e.display,a=e.tasks,n=e.toggleFinished,l=e.deleteTask,c=se();return t&&r.a.createElement(m.a,{theme:ie},r.a.createElement(d.a,null),r.a.createElement(g.a,{className:c.tasksFrame},r.a.createElement(K.a,{className:c.tasksContainer,spacing:2},a.map((function(e,t){return r.a.createElement(oe,{key:t,task:e,toggleFinished:function(){return n(e.id)},deleteTask:function(){return l(e.id)}})})))),r.a.createElement(g.a,{sx:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",m:1}}))},me=a(3),de=a(241),ge=a(265),fe=a(244),pe=a(249),be=a(240),Ee=function(){return U.a.get("api/categories").then((function(e){return e.data}))},he=function(e){var t=U.a.post("api/categories",e);return console.log(t.then((function(e){return e.data}))),t.then((function(e){return e.data}))},ve=Object(le.a)((function(e){return{fab:{position:"fixed",bottom:20,left:20},container:Object(me.a)({borderRadius:5,width:500,height:400,backgroundColor:"white",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"},e.breakpoints.down("sm"),{width:"100vw",height:"100vh"}),item:{marginBottom:e.spacing(3)}}})),Oe=function(e){var t=e.tasks,a=e.setTasks,l=ve(),c=Object(n.useState)(!1),o=Object(T.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(T.a)(u,2),d=m[0],g=m[1],f=Object(n.useState)(""),p=Object(T.a)(f,2),b=p[0],E=p[1],v=Object(n.useState)("Public"),O=Object(T.a)(v,2),j=O[0],w=O[1],k=Object(n.useState)(""),x=Object(T.a)(k,2),y=x[0],S=x[1],C=Object(n.useState)([]),D=Object(T.a)(C,2),P=D[0],z=D[1],U=function(e,t){"clickaway"!==t&&g(!1)};return r.a.createElement("div",null,r.a.createElement(de.a,{title:"Add","aria-label":"add",onClick:function(){return s(!0)}},r.a.createElement(ge.a,{color:"primary",className:l.fab},r.a.createElement(be.a,null))),r.a.createElement(fe.a,{open:i,onClose:function(){return s(!1)},className:l.modal},r.a.createElement(K.a,{className:l.container},r.a.createElement("h2",null,"Create a Post"),r.a.createElement("form",{className:l.form,autoComplete:"off",onSubmit:function(e){e.preventDefault();var n=!0===!j.replace(/\s/g,"").length?"uncategorized":j,r={title:y,content:b,id:Math.random(1e7),status:!1,category:n,date:Date()},l=P.find((function(e){return e.category===j}));console.log(l),void 0===l&&"uncategorized"!==n&&he({category:n}).then((function(e){console.log(e),z(P.concat(e))})),b.replace(/\s/g,"").length?y.replace(/\s/g,"").length?F.create(r).then((function(e){console.log(e),a(t.concat(e)),E(""),w("Public"),S(""),s(!1),g(!0)})):(alert("Please enter a valid title"),S("")):(alert("Please enter valid text."),E(""))}},r.a.createElement("div",{className:l.item},r.a.createElement(L.a,{id:"standard-basic",label:"Title",value:y,onChange:function(e){S(e.target.value)},size:"small",style:{width:"100%"}})),r.a.createElement("div",{className:l.item},r.a.createElement(L.a,{id:"outlined-multiline-static",multiline:!0,rows:4,defaultValue:"Enter text here...",onChange:function(e){console.log(e.target.value),E(e.target.value)},value:b,label:"Description",placeholder:"Enter text here...",size:"small",style:{width:"100%"},variant:"outlined"})),r.a.createElement("div",{className:l.item},r.a.createElement(L.a,{select:!0,label:"Visibility",value:j,onChange:function(e){w(e.target.value)}},r.a.createElement(pe.a,{value:"Public"}," Public"),r.a.createElement(pe.a,{value:"Private"}," Private"),r.a.createElement(pe.a,{value:"Unlisted"}," Unlisted"))),r.a.createElement("div",{className:l.item},r.a.createElement(h.a,{variant:"outlined",color:"primary",type:"submit",style:{marginRight:20}},"Post"),r.a.createElement(h.a,{variant:"outlined",color:"secondary",onClick:function(){s(!1)}},"Cancel"))))),r.a.createElement(I.a,{anchorOrigin:{vertical:" bottom",horizontal:"center"},open:d,autoHideDuration:3e3,onClose:U},r.a.createElement(N.a,{onClose:U,severity:"success"},"Created new post!")))},je=Object(s.a)(),we=function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),i=Object(T.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(""),g=Object(T.a)(d,2),f=g[0],p=g[1],b=Object(n.useState)([]),E=Object(T.a)(b,2),h=E[0],v=E[1],O=Object(n.useState)(null),j=Object(T.a)(O,2),w=j[0],k=j[1],x=Object(n.useState)(null),y=Object(T.a)(x,2),S=y[0],C=y[1],D=Object(o.g)();Object(n.useEffect)((function(){console.log("effect"),F.getAll().then((function(e){l(e)}))}),[]),Object(n.useEffect)((function(){console.log("categories"),Ee().then((function(e){v(e),console.log(e)}))}),[]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedTaskappUser");if(console.log(e),e){var t=Object(Y.a)(e),a=new Date;if(1e3*t.exp<a.getTime())try{window.localStorage.removeItem("loggedTaskappUser"),window.location.reload()}catch(r){k("Already logged out"),setTimeout((function(){k(null)}),5e3)}else{var n=JSON.parse(e);C(n),F.setToken(n.token),B(n.token)}}}),[]);return S||D("/loginpage"),r.a.createElement(m.a,{theme:je},r.a.createElement(P,{message:w}),r.a.createElement(ee,{username:S?S.username:"",handleLogOut:function(e){e.preventDefault();try{window.localStorage.removeItem("loggedTaskappUser")}catch(t){k("Already logged out"),setTimeout((function(){k(null)}),5e3)}D("/loginpage")}}),r.a.createElement(q.a,{container:!0,sx:{padding:"16px"}},r.a.createElement(q.a,{item:!0,sm:2,xs:2}),r.a.createElement(q.a,{item:!0,sm:7,xs:10},r.a.createElement(ue,{display:!!S,tasks:a,toggleFinished:function(e){var t=a.find((function(t){return t.id===e})),n=Object(Q.a)(Object(Q.a)({},t),{},{status:!t.status});F.update(e,n).then((function(t){l(a.map((function(a){return a.id!==e?a:t})))}))},deleteTask:function(e){l(a.filter((function(t){return t.id!==e})))},newTask:s,handleTaskChange:function(e){console.log(e.target.value),u(e.target.value)},newCategory:f,handleCategoryChange:function(e){p(e.target.value)},currentCategories:h})),r.a.createElement(q.a,{item:!0,sm:3})),S&&r.a.createElement(Oe,{tasks:a,setTasks:l}))};c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",element:r.a.createElement(x,null)}),r.a.createElement(o.b,{path:"/createaccount",element:r.a.createElement(D,null)}),r.a.createElement(o.b,{path:"/loginpage",element:r.a.createElement(X,null)}),r.a.createElement(o.b,{path:"/homepage",element:r.a.createElement(we,null)}))),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.d6a1a752.chunk.js.map